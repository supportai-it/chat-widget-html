function createChatWidget({chatUrl:n="/example",buttonColor:e="#e74266",buttonHoverColor:t="#d6365d",buttonSize:o="64px",getContext:i=(()=>"")}={}){const d=()=>{const e=i();if(e){const t=new URL(n);t.searchParams.set("context",e),a.src=t.toString()}},r=document.createElement("div"),a=document.createElement("iframe"),c=document.createElement("div"),s=document.createElement("div");r.id="chat-frame",r.style.display="none",a.src=n,c.id="chat-btn",s.innerHTML='\n        <svg viewBox="0 0 24 24" width="32" height="32">\n            <path fill="currentColor" d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/>\n        </svg>\n    ',c.appendChild(s),r.appendChild(a);const l=document.createElement("style");l.textContent=`\n        #chat-frame {\n            position: fixed;\n            bottom: calc(${o} + 1.5rem);\n            right: 1rem;\n            z-index: 999;\n            display: none;\n            justify-content: flex-end;\n            align-items: flex-end;\n        }\n\n        #chat-frame iframe {\n            position: absolute;\n            width: 90vw;\n            max-width: 400px;\n            height: 80vh;\n            max-height: 600px;\n            border: none;\n            overflow: hidden;\n            transform-origin: bottom right;\n        }\n\n        #chat-btn {\n            position: fixed;\n            bottom: 1rem;\n            right: 1rem;\n            z-index: 9999;\n            cursor: pointer;\n        }\n\n        #chat-btn div {\n            background: ${e};\n            color: #fff;\n            width: ${o};\n            height: ${o};\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: transform 0.15s ease, background 0.15s ease;\n        }\n\n        #chat-btn div:hover {\n            transform: scale(1.05);\n            background: ${t};\n        }\n\n        #chat-btn svg {\n            fill: currentColor;\n        }\n    `,document.body.appendChild(l),document.body.appendChild(r),document.body.appendChild(c),d(),window.addEventListener("chat-widget/updateContext",d),c.addEventListener("click",(()=>{r.style.display="none"===r.style.display?"flex":"none"}))}